---
- name: Get Jenkins Slave service info
  win_service:
    name: Jenkins_Slave
  register: service_info

- name: Test Jenkins Slave service is installed
  assert:
    that:
      - service_info.exists == true

#- debug:
#    msg: '{{ jenkins_slave_home_dir }}'
#    msg: 'FOO_VAR: {{ foo_var }}, BAR_VAR: {{ bar_var }}'


#- name: Test config file has valid secret
#  assert:
#    that:
#      - out.found

- name: Get Jenkins Slave config file
  win_shell: cat jenkins-slave.xml
    chdir: '{{ jenkins_slave_home_dir }}'
  register: out

- debug:
    msg: '{{ out }}'
